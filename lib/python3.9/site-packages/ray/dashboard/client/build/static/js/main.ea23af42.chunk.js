(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[1],{109:function(e,t,n){"use strict";var a=n(159),r=n(158),o=n(0),c=n.n(o),i=Object(a.a)((function(e){return{card:{padding:e.spacing(2),paddingTop:e.spacing(1.5),margin:[e.spacing(2),e.spacing(1)].map((function(e){return"".concat(e,"px")})).join(" ")},title:{fontSize:e.typography.fontSize+2,fontWeight:500,color:e.palette.text.secondary,marginBottom:e.spacing(1)},body:{padding:e.spacing(.5)}}}));t.a=function(e){var t=e.title,n=e.children,a=i();return c.a.createElement(r.a,{className:a.card},c.a.createElement("div",{className:a.title},t),c.a.createElement("div",{className:a.body},n))}},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a,r,o=n(27),c=n(100),i=n(97),l=n(99),u=n(493),s=n(96),m=n(494),d=n(495),p=n(0),f=n.n(p);!function(e){e.ALIVE="ALIVE",e.PENDING="PENDING",e.RECONSTRUCTING="RECONSTRUCTING",e.DEAD="DEAD"}(a||(a={}));var b={node:{ALIVE:c.a,DEAD:i.a},worker:{ALIVE:c.a},actor:(r={},Object(o.a)(r,a.ALIVE,c.a),Object(o.a)(r,a.DEAD,i.a),Object(o.a)(r,a.PENDING,l.a),Object(o.a)(r,a.RECONSTRUCTING,u.a),r),job:{INIT:s.a,SUBMITTED:l.a,DISPATCHED:u.a,RUNNING:c.a,COMPLETED:m.a,FINISHED:m.a,FAILED:i.a}},g={deps:l.a,INFO:m.a,ERROR:i.a},v=function(e){var t=e.type,n=e.status,a=e.suffix,r={padding:"2px 8px",border:"solid 1px",borderRadius:4,fontSize:12,margin:2},o=d.a;return g[t]?o=g[t]:"string"===typeof n&&b[t]&&b[t][n]&&(o=b[t][n]),r.color=o[500],r.borderColor=o[500],o!==d.a&&(r.backgroundColor="".concat(o[500],"20")),f.a.createElement("span",{style:r},n,a)}},113:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l}));var a=n(12),r=n.n(a),o=n(17),c=n(50),i=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)("nodes?view=summary");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)("nodes/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},115:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(16),r=n(85),o=n(7),c=n(78),i=n(0),l=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1];return{changeFilter:function(e,t){var o=n.find((function(t){return t.key===e}));o?o.val=t:n.push({key:e,val:t}),a(Object(r.a)(n))},filterFunc:function(e){return n.every((function(t){return!t.val||Object(c.get)(e,t.key,"").toString().includes(t.val)}))}}},u=function(e){var t=Object(i.useState)({key:e||"",desc:!1}),n=Object(o.a)(t,2),r=n[0],l=n[1];return{sorterFunc:function(e,t){if(!r.key)return 0;var n=e,a=t;return r.desc&&(a=e,n=t),Object(c.get)(a,r.key)?Object(c.get)(n,r.key)?Object(c.get)(a,r.key)>Object(c.get)(n,r.key)?1:-1:1:-1},setSortKey:function(e){return l(Object(a.a)(Object(a.a)({},r),{},{key:e}))},setOrderDesc:function(e){return l(Object(a.a)(Object(a.a)({},r),{},{desc:e}))},sorterKey:r.key}}},117:function(e,t,n){"use strict";var a=n(16),r=n(7),o=n(64),c=n.n(o),i=n(153),l=n.n(i),u=n(0),s=n.n(u),m=n(155),d=(n(421),n(422),n(423),n(81)),p=function(){return Math.random().toString(16).slice(-8)},f=/(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)\s+([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/,b=function e(t,n){var a=t.type,r=t.tagName,o=t.properties,c=t.children,i=t.value,l=void 0===i?"":i,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(a){case"element":return s.a.createElement(r,{className:o.className[0],key:"".concat(n,"line").concat(p())},c.map((function(t,a){return e(t,"".concat(n,"-").concat(a),u)})));case"text":if(u&&l.includes(u)){var m=[],d=l.split(u),f=d.shift();if(!f)return s.a.createElement("span",{className:"find-kws"},u);for(;"string"===typeof f;)""!==f?m.push(f):m.push(s.a.createElement("span",{className:"find-kws"},u)),(f=d.shift())&&m.push(s.a.createElement("span",{className:"find-kws"},u));return m}return l;default:return[]}};t.a=function(e){var t=e.content,n=e.width,o=void 0===n?"100%":n,i=e.height,p=e.fontSize,g=void 0===p?12:p,v=e.theme,h=void 0===v?Object(d.c)():v,E=e.keywords,y=void 0===E?"":E,j=e.language,O=void 0===j?"dos":j,k=e.focusLine,S=void 0===k?1:k,N=e.style,x=void 0===N?{}:N,C=e.listRef,w=e.onScrollBottom,I=e.revert,T=void 0!==I&&I,F=e.startTime,R=e.endTime,A=Object(u.useState)([]),L=Object(r.a)(A,2),M=L[0],D=L[1],P=M.length,z=Object(u.useRef)(),W=Object(u.useRef)(null),B=Object(u.useRef)(null);C&&(C.current=B.current);var U=function(e){var t=e.index,n=e.style,r=M[T?M.length-1-t:t],o=r.i,c=r.origin;return s.a.createElement("div",{key:"".concat(t,"list"),style:Object(a.a)(Object(a.a)({},n),{},{overflowX:"visible",whiteSpace:"pre"})},s.a.createElement("span",{style:{marginRight:4,width:6*"".concat(M.length).length+4,color:"#999",display:"inline-block"}},o+1),l.a.highlight(O,c).value.map((function(e){return b(e,t.toString(),y)})))};return Object(u.useEffect)((function(){var e=t.split("\n");z.current&&clearTimeout(z.current),z.current=setTimeout((function(){D(e.map((function(e,t){return{i:t,origin:e,time:((null===e||void 0===e?void 0:e.match(f))||[""])[0]}})).filter((function(e){var t=e.origin.includes(y);return e.time&&F&&!c()(e.time).isAfter(c()(F))&&(t=!1),e.time&&R&&!c()(e.time).isBefore(c()(R))&&(t=!1),t})).map((function(e){return Object(a.a)({},e)})))}),500)}),[t,y,O,F,R]),Object(u.useEffect)((function(){var e;W.current&&(null===(e=W.current)||void 0===e||e.scrollTo((S-1)*(g+6)))}),[S,g]),Object(u.useEffect)((function(){var e=null;if(B.current){var t=function(t){var n=t.target;n&&n.scrollTop+n.clientHeight===n.scrollHeight&&w&&w(t),e=B.current};return B.current.addEventListener("scroll",t),function(){e&&e.removeEventListener("scroll",t)}}}),[w]),s.a.createElement(m.a,{height:i||18*(t.split("\n").length+1),width:o,ref:W,outerRef:B,className:"hljs-".concat(h),style:Object(a.a)({fontSize:g,fontFamily:"menlo, monospace"},x),itemSize:g+6,itemCount:P},U)}},133:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(7),r=n(441),o=n(0),c=n.n(o),i=n(9),l=function(){var e=Object(o.useState)(!1),t=Object(a.a)(e,2),n=t[0],l=t[1],u=Object(o.useState)(!1),s=Object(a.a)(u,2),m=s[0],d=s[1];return Object(o.useEffect)((function(){Object(i.m)().then((function(e){l(e.usageStatsPromptEnabled),d(e.usageStatsEnabled)}))}),[]),n?c.a.createElement(r.a,{style:{marginTop:30},severity:"info"},m?c.a.createElement("span",null,"Usage stats collection is enabled. To disable this, add `--disable-usage-stats` to the command that starts the cluster, or run the following command: `ray disable-usage-stats` before starting the cluster. See"," ",c.a.createElement("a",{href:"https://docs.ray.io/en/master/cluster/usage-stats.html",target:"_blank",rel:"noreferrer"},"https://docs.ray.io/en/master/cluster/usage-stats.html")," ","for more details."):c.a.createElement("span",null,"Usage stats collection is disabled.")):null}},134:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f}));var a=n(48),r=n(438),o=n(425),c=n(0),i=n.n(c),l=n(86),u=n(21),s=n(20),m=120,d=function(e){if(null===e.gpus)return NaN;var t=e.gpus.filter((function(e){return e.utilizationGpu}));return 0===t.length?NaN:Object(s.b)(t.map((function(e){var t;return null!==(t=e.utilizationGpu)&&void 0!==t?t:0})))/t.length},p=function(e){var t=e.gpu,n=e.slot;return i.a.createElement(r.a,{display:"flex",style:{minWidth:m}},i.a.createElement(o.a,{title:t.name},i.a.createElement(l.a,{variant:"body1"},"[",n,"]:")),void 0!==t.utilizationGpu?i.a.createElement(u.a,{percent:t.utilizationGpu,text:"".concat(t.utilizationGpu.toFixed(1),"%")}):i.a.createElement(a.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"))},f=function(e){var t=e.resourceSlot,n=t.allocation,r=t.slot,o=n>=1&&void 0===r?"0":void 0===r?"?":r.toString();return i.a.createElement(a.a,{variant:"body1"},"[",o,"]: ",n)},b={id:"gpu",ClusterFeatureRenderFn:function(e){var t=function(e){var t=e.map((function(e){return{weight:e.gpus.length,value:d(e)}})).filter((function(e){return!isNaN(e.value)}));return 0===t.length?NaN:Object(s.a)(t)}(e.nodes);return i.a.createElement("div",{style:{minWidth:m}},isNaN(t)?i.a.createElement(a.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):i.a.createElement(u.a,{percent:t,text:"".concat(t.toFixed(1),"%")}))},NodeFeatureRenderFn:function(e){var t=e.node,n=void 0!==t.gpus&&0!==t.gpus.length;return i.a.createElement("div",{style:{minWidth:m}},n?t.gpus.map((function(e,t){return i.a.createElement(p,{gpu:e,slot:t})})):i.a.createElement(a.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"))},WorkerFeatureRenderFn:function(e){var t,n,r=null===(t=e.worker.coreWorkerStats[0])||void 0===t?void 0:t.usedResources,o=null===r||void 0===r?void 0:r.GPU;return n=void 0===o?i.a.createElement(a.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):o.resourceSlots.sort((function(e,t){return void 0===e.slot&&void 0===t.slot?0:void 0===e.slot?1:void 0===t.slot?-1:e.slot-t.slot})).map((function(e){return i.a.createElement(f,{resourceSlot:e})})),i.a.createElement("div",{style:{minWidth:60}},n)},nodeAccessor:function(e){var t=e.node;return d(t)},workerAccessor:function(e){var t;return null!==(t=function(e){var t,n=null===e||void 0===e||null===(t=e.coreWorkerStats[0])||void 0===t?void 0:t.usedResources,a=null===n||void 0===n?void 0:n.GPU;return a&&Object(s.b)(a.resourceSlots.map((function(e){return e.allocation})))}(e.worker))&&void 0!==t?t:0}};t.d=b},138:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.3704c1bb.svg"},165:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=(n(181),n(81));c.a.render(r.a.createElement(i.b,null),document.getElementById("root"))},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(39),r=function(e){if(0===e.length)return 0;var t,n=0,r=0,o=Object(a.a)(e);try{for(o.s();!(t=o.n()).done;){var c=t.value,i=c.weight;n+=i*c.value,r+=i}}catch(l){o.e(l)}finally{o.f()}return n/r},o=function(e){return e.reduce((function(e,t){return e+t}),0)}},21:function(e,t,n){"use strict";var a=n(7),r=n(159),o=n(442),c=n(48),i=n(0),l=n.n(i),u=Object(r.a)((function(e){return Object(o.a)({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1,display:"flex",flexGrow:1},inner:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}})}));t.a=function(e){var t=e.percent,n=e.text,r=u(),o=Math.max(Math.min(t,100),0),i=[0,255,0],s=i,m=function(e,t,n){var r=Object(a.a)(e,3),o=r[0],c=r[1],i=r[2],l=Object(a.a)(t,3);return[o*(1-n)+l[0]*n,c*(1-n)+l[1]*n,i*(1-n)+l[2]*n]}(i,[255,0,0],o/100),d="\n    linear-gradient(\n      to right,\n      rgba(".concat(s.join(","),", ").concat(.2,") 0%,\n      rgba(").concat(m.join(","),", ").concat(.2,") ").concat(o,"%,\n      transparent ").concat(o,"%\n    )\n  ");return l.a.createElement("span",{className:r.root},l.a.createElement("span",{className:r.inner,style:{background:d,flexGrow:1}},l.a.createElement(c.a,{align:"center"},n)))}},421:function(e,t,n){},422:function(e,t,n){},423:function(e,t,n){},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var a=n(69),r=n.n(a),o=function(e){return e.startsWith("/")?e.slice(1):e},c=function(e,t){return r.a.get(o(e),t)}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ya})),n.d(t,"c",(function(){return Ka}));var a,r=n(7),o=n(500),c=n(499),i=n(0),l=n.n(i),u=n(18),s=n(67),m=n(61),d=n(12),p=n.n(d),f=n(17),b=n(159),g=n(442),v=n(48),h=n(486),E=n(501),y=n(492),j=n(9),O=n(133),k=n(22),S=n(23),N=n(25),x=n(24),C=n(4),w=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.lastUpdatedAt,a=e.error;return l.a.createElement("div",{className:t.root},null!==n&&l.a.createElement(v.a,{className:t.lastUpdated},"Last updated: ",new Date(n).toLocaleString()),null!==a&&l.a.createElement(v.a,{className:t.error},a))}}]),n}(l.a.Component),I=Object(u.b)((function(e){return{lastUpdatedAt:e.dashboard.lastUpdatedAt,error:e.dashboard.error}}))(Object(C.a)((function(e){return Object(g.a)({root:{marginTop:e.spacing(2)},lastUpdated:{color:e.palette.text.secondary,fontSize:"0.8125rem",textAlign:"center"},error:{color:e.palette.error.main,fontSize:"0.8125rem",textAlign:"center"}})}))(w)),T=n(438),F=n(429),R=n(430),A=n(432),L=n(433),M=n(508),D=n(505),P=n(441),z=function(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0},W=function(e,t,n){var a=n(e),r=n(t);return r<a?-1:r>a?1:0},B=function(e,t){return function(n,a){return"desc"===e?W(n,a,t):-W(n,a,t)}},U=function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))},G=n(20),_=n(107),H=n(158),V=n(476),q=n(143),J=n.n(q),Y=n(144),K=n.n(Y),X=function(e){var t=e.onClick;return l.a.createElement(J.a,{onClick:t})},Q=function(e){var t=e.onClick;return l.a.createElement(K.a,{onClick:t})},Z=n(425),$=Object(b.a)({tooltipLabel:{textDecorationLine:"underline",textDecorationColor:"#a6c3e3",textDecorationThickness:"1px",textDecorationStyle:"dotted",cursor:"help"}}),ee=function(e){var t=e.label,n=e.datum,a=e.tooltip,r=$(),o=l.a.createElement(V.a,{container:!0,item:!0,xs:12},l.a.createElement(V.a,{item:!0,xs:6},l.a.createElement(T.a,{className:a&&r.tooltipLabel},t)),l.a.createElement(V.a,{item:!0,xs:6},l.a.createElement("span",null,n)));return a?l.a.createElement(Z.a,{title:a},o):o},te=n(27),ne=n(16),ae=n(477),re=n(21),oe=j.a.Alive,ce=j.a.Dead,ie=j.a.PendingCreation,le=j.a.Restarting,ue=j.a.DependenciesUnready,se=j.a.Infeasible,me=j.a.PendingResources,de=Object(b.a)((function(e){return Object(g.a)({infeasible:{color:e.palette.error.light},pendingResources:{color:e.palette.warning.light},unknown:{color:e.palette.warning.light},creating:{color:e.palette.success.light},alive:{color:e.palette.success.dark},restarting:{color:e.palette.warning.light},dead:{color:"#cccccc"},tooltip:{cursor:"help"}})})),pe=(a={},Object(te.a)(a,oe,"The actor is alive and handling remote calls."),Object(te.a)(a,ce,"The actor is dead and will not be restarted anymore."),Object(te.a)(a,se,"The actor cannot be created because of insufficient resources in the cluster. Please examine its resource constraints to make sure they are correct or add additional compute to your cluster."),Object(te.a)(a,le,"The actor died and is restarting."),Object(te.a)(a,ie,"The actor's resources and other dependencies are ready, and the Ray backend is processing its creation."),Object(te.a)(a,ue,"The actor is pending creation because it is waiting for one or more of its initialization arguments to be ready."),Object(te.a)(a,me,"The actor is pending resources, such as GPU, Memory, or CPU. It will be created when they become available."),a),fe=function(e){var t,n=e.state,a=e.variant,r=e.showTooltip,o=de(),c=null!==a&&void 0!==a?a:"body1";switch(n){case se:t=l.a.createElement(v.a,{variant:c,className:o.infeasible},"Infeasible");break;case me:t=l.a.createElement(v.a,{variant:c,className:o.pendingResources},"Pending Resources");break;case ie:t=l.a.createElement(v.a,{variant:c,className:o.creating},"Creating");break;case ue:t=l.a.createElement(v.a,{variant:c,className:o.creating},"Dependencies Unready");break;case oe:t=l.a.createElement(v.a,{variant:c,className:o.alive},"Alive");break;case le:t=l.a.createElement(v.a,{variant:c,className:o.restarting},"Restarting");break;case ce:t=l.a.createElement(v.a,{variant:c,className:o.dead},"Dead")}return r?l.a.createElement(Z.a,{className:o.tooltip,title:pe[n]},t):t},be="https://docs.ray.io/en/master/memory-management.html#debugging-using-ray-memory",ge=Object(b.a)((function(e){return{divider:{width:"100%",margin:"0 auto"},actorTitleWrapper:{marginTop:e.spacing(1),marginBottom:e.spacing(1),fontWeight:"bold",fontSize:"130%"},detailsPane:{margin:e.spacing(1)}}})),ve=function(e){var t,n,a,o,c=e.actor,i=ge(),u=function(e){var t,n,a,o,c,i,l,u,s,m;return Object(j.n)(e)?[{label:"Resources",value:e.usedResources&&Object.entries(e.usedResources).length>0&&Object.entries(e.usedResources).sort((function(e,t){return e[0].localeCompare(t[0])})).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return"".concat(Object(G.b)(a.resourceSlots.map((function(e){return e.allocation})))," ").concat(n)})).join(", ")},{label:"Number of pending tasks",value:null!==(t=null===(n=e.taskQueueLength)||void 0===n?void 0:n.toLocaleString())&&void 0!==t?t:"0",tooltip:"The number of tasks that are currently pending to execute on this actor. If this number remains consistently high, it may indicate that this actor is a bottleneck in your application."},{label:"Number of executed tasks",value:null!==(a=null===(o=e.numExecutedTasks)||void 0===o?void 0:o.toLocaleString())&&void 0!==a?a:"0",tooltip:"The number of tasks this actor has executed throughout its lifetimes."},{label:"Number of ObjectRefs in scope",value:null!==(c=null===(i=e.numObjectRefsInScope)||void 0===i?void 0:i.toLocaleString())&&void 0!==c?c:"0",tooltip:"The number of ObjectRefs that this actor is keeping in scope via its internal state. This does not imply that the objects are in active use or colocated on the node with the actor "+"currently. This can be useful for debugging memory leaks. See the docs at ".concat(be," ")+"for more information."},{label:"Number of local objects",value:null!==(l=null===(u=e.numLocalObjects)||void 0===u?void 0:u.toLocaleString())&&void 0!==l?l:"0",tooltip:"The number of small objects that this actor has stored in its local in-process memory store. This can be useful for "+"debugging memory leaks. See the docs at ".concat(be," for more information")},{label:"Object store memory used (MiB)",value:null!==(s=null===(m=e.usedObjectStoreMemory)||void 0===m?void 0:m.toLocaleString())&&void 0!==s?s:"0",tooltip:"The total amount of memory that this actor is occupying in the Ray object store. If this number is increasing without bounds, you might have a memory leak. See "+"the docs at: ".concat(be," for more information.")}]:[{label:"Actor ID",value:e.actorId,tooltip:""},{label:"Required resources",value:e.requiredResources&&Object.entries(e.requiredResources).length>0&&Object.entries(e.requiredResources).sort((function(e,t){return e[0].localeCompare(t[0])})).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return"".concat(a.toLocaleString()," ").concat(n)})).join(", "),tooltip:""}]}(c);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:i.actorTitleWrapper},l.a.createElement("div",null,c.actorClass),l.a.createElement(fe,{state:c.state})),Object(j.n)(c)&&l.a.createElement(V.a,{container:!0,spacing:3,className:i.detailsPane},l.a.createElement(V.a,{container:!0,item:!0,xs:6},l.a.createElement(V.a,{item:!0,xs:4},l.a.createElement(v.a,null,"CPU Usage")),l.a.createElement(V.a,{item:!0,xs:4},l.a.createElement(re.a,{percent:null!==(t=null===(n=c.processStats)||void 0===n?void 0:n.cpuPercent)&&void 0!==t?t:0,text:"".concat(null!==(a=null===(o=c.processStats)||void 0===o?void 0:o.cpuPercent)&&void 0!==a?a:0,"%")})),l.a.createElement(V.a,{item:!0,xs:4})),c.gpus.length>0&&l.a.createElement(V.a,{container:!0,item:!0,xs:6},l.a.createElement(V.a,{item:!0,xs:12},l.a.createElement(v.a,null,"GPU Usage")),c.gpus.map((function(e){var t=e.utilizationGpu?l.a.createElement(re.a,{percent:100*e.utilizationGpu,text:"".concat(100*e.utilizationGpu,"%")}):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A");return l.a.createElement(l.a.Fragment,{key:e.uuid},l.a.createElement(V.a,{item:!0,xs:4},"[".concat(e.name,"]")),l.a.createElement(V.a,{item:!0,xs:4},t),l.a.createElement(V.a,{item:!0,xs:4}))})))),l.a.createElement(ae.a,{className:i.divider}),l.a.createElement(V.a,{container:!0,className:i.detailsPane},u.map((function(e){var t=e.label,n=e.value,a=e.tooltip;return n&&n.length>0&&l.a.createElement(ee,{key:t,label:t,datum:n,tooltip:a})}))))},he=Object(b.a)((function(e){return Object(g.a)({root:{borderColor:e.palette.divider,borderStyle:"solid",borderWidth:1,marginTop:e.spacing(2),padding:e.spacing(2),width:"100%"},title:{color:e.palette.text.secondary,fontSize:"0.75rem"},action:{color:e.palette.primary.main,textDecoration:"none","&:hover":{cursor:"pointer"}},infeasible:{color:e.palette.error.main},pendingResources:{color:e.palette.secondary.main},webuiDisplay:{fontSize:"0.875rem"},inlineHTML:{fontSize:"0.875rem",display:"inline"}})})),Ee=function(e){var t=e.actor,n=Object(i.useState)({}),a=Object(r.a)(n,2),o=a[0],c=a[1],u=he(),s=function(e){return Object(f.a)(p.a.mark((function n(){var a,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.state!==j.a.Alive){n.next=8;break}return n.next=3,Object(j.p)(t.nodeId,t.pid,e);case 3:return a=n.sent,c(Object(ne.a)(Object(ne.a)({},o),{},Object(te.a)({},a,{startTime:Date.now(),latestResponse:null}))),r=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)(a);case 2:t=e.sent,c(Object(ne.a)(Object(ne.a)({},o),{},Object(te.a)({},a,Object(ne.a)(Object(ne.a)({},o[a]),{},{latestResponse:t})))),"pending"===t.status&&setTimeout(r,1e3);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.next=8,r();case 8:case"end":return n.stop()}}),n)})))},m=[];return Object(j.n)(t)&&t.webuiDisplay&&(m=Object.keys(t.webuiDisplay).sort().map((function(e,n,a){var r=t.webuiDisplay[e],o=JSON.parse(r),c=o.message;return"html"===o.dtype&&(c=l.a.createElement("div",{className:u.inlineHTML,dangerouslySetInnerHTML:{__html:c}})),""===e?l.a.createElement(v.a,{className:u.webuiDisplay},"\xa0 \xa0 ",c):l.a.createElement(v.a,{className:u.webuiDisplay},"\xa0 \xa0 ",e,": ",c)}))),l.a.createElement("div",{className:u.root},l.a.createElement(v.a,{className:u.title},Object(j.n)(t)?l.a.createElement(l.a.Fragment,null,"Actor ",t.actorId," (Profile for",[10,30,60].map((function(e){return l.a.createElement(l.a.Fragment,{key:e}," ",l.a.createElement("span",{className:u.action,onClick:s(e)},e,"s"))})),")"," ",t.state===j.a.Alive&&l.a.createElement("span",{className:u.action,onClick:function(){t.state===j.a.Alive&&Object(j.o)(t.actorId,t.ipAddress,t.port)}},"Kill Actor"),Object.entries(o).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1],o=a.startTime,c=a.latestResponse;return null!==c&&l.a.createElement(l.a.Fragment,{key:n},"(","pending"===c.status?"Profiling for ".concat(Math.round((Date.now()-o)/1e3),"s..."):"finished"===c.status?l.a.createElement("a",{className:u.action,href:Object(j.i)(n),rel:"noopener noreferrer",target:"_blank"},"Profiling result"):"error"===c.status?"Profiling error: ".concat(c.error.trim()):void 0,")"," ")}))):t.state===j.a.Infeasible?l.a.createElement("span",{className:u.infeasible},t.actorClass," cannot be created because the Ray cluster cannot satisfy its resource requirements or its runtime_env could not be created."):l.a.createElement("span",{className:u.pendingResources},t.actorClass," is pending until resources are available.")),l.a.createElement(ve,{actor:t}),Object(j.n)(t)&&l.a.createElement(l.a.Fragment,null,m.length>0&&l.a.createElement(l.a.Fragment,null,m)))},ye=function(e){return"".concat(e,"s")},je=Object(_.a)(T.a)({textAlign:"center"}),Oe=Object(b.a)((function(e){return Object(g.a)({container:{margin:e.spacing(1),padding:e.spacing(1),marginLeft:e.spacing(2)},title:{margin:e.spacing(1)},actorEntry:{width:"100%"}})})),ke=function(e){var t=e.actorGroup,n=e.title,a=Oe(),o=Object(i.useState)(!1),c=Object(r.a)(o,2),u=c[0],s=c[1],m=function(){return s(!u)},d=t.entries.map((function(e,t){var n;return l.a.createElement(T.a,{component:"div",className:a.actorEntry,key:null!==(n=e.actorId)&&void 0!==n?n:t},l.a.createElement(Ee,{actor:e}))})),p=j.a.Alive,f=j.a.PendingResources,b=j.a.Infeasible,g=t.summary;return l.a.createElement(H.a,{className:a.container},l.a.createElement(T.a,{display:"block",className:a.title},l.a.createElement(v.a,{variant:"h5"},n)),l.a.createElement(V.a,{container:!0,xs:12,spacing:2},l.a.createElement(V.a,{container:!0,item:!0,xs:5,className:a.title},b in g.stateToCount&&l.a.createElement(ee,{label:l.a.createElement(fe,{state:b,variant:"body1",showTooltip:!0}),datum:g.stateToCount[b]}),l.a.createElement(ee,{label:l.a.createElement(fe,{state:p,variant:"body1",showTooltip:!0}),datum:p in g.stateToCount?g.stateToCount[p]:0}),l.a.createElement(ee,{label:l.a.createElement(fe,{state:f,variant:"body1",showTooltip:!0}),datum:f in g.stateToCount?g.stateToCount[f]:0})),l.a.createElement(V.a,{container:!0,item:!0,xs:5,className:a.title},l.a.createElement(ee,{label:"Mean Lifetime",datum:ye(g.avgLifetime)}),l.a.createElement(ee,{label:"Max Lifetime",datum:ye(g.maxLifetime)}),l.a.createElement(ee,{label:"Executed Tasks",datum:g.numExecutedTasks}))),u?l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,null,d),l.a.createElement(je,null,l.a.createElement(X,{onClick:m}))):l.a.createElement(je,null,l.a.createElement(Q,{onClick:m})))},Se=function(e){var t=e.actorGroups,n=function(e){var t;return null!==(t=e.summary.stateToCount[j.a.Infeasible])&&void 0!==t?t:0},a=Object(G.b)(Object.values(t).map(n)),o=Object(i.useState)(a>0),c=Object(r.a)(o,2),u=c[0],s=c[1],m=U(Object.entries(t),(function(e,t){var a=Object(r.a)(e,2),o=a[0],c=a[1],i=Object(r.a)(t,2),l=i[0],u=i[1],s=n(c),m=n(u);return s!==m?s>m?-1:1:o>l?1:-1})).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return l.a.createElement(ke,{actorGroup:a,title:n,key:"acg-".concat(n)})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(D.a,{open:u},l.a.createElement(P.a,{severity:"warning",onClose:function(){return s(!1)}},"There are one or more actors that cannot currently be created due to insufficient cluster resources. These have been sorted to the top of the list. If you are using autoscaling functionality, you may ignore this message.")),m)},Ne=Object(b.a)((function(e){return Object(g.a)({container:{marginBottom:e.spacing(1)}})})),xe=function(e){return e.dashboard.actorGroups},Ce=function(){var e=Object(i.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(M.a)(n,500),c=Object(r.a)(o,1)[0],s=Ne(),m=Object(u.d)(xe);if(!m)return l.a.createElement(v.a,{color:"textSecondary"},"Loading...");if(0===Object.keys(m).length)return l.a.createElement(v.a,{color:"textSecondary"},"Finished loading, but have found no actors yet.");var d=""===c?Object.entries(m):Object.entries(m).filter((function(e){var t=Object(r.a)(e,2),n=t[0];t[1];return function(e,t){var n=t.toLowerCase();return-1!==e.toLowerCase().search(n)}(n,c)}));return l.a.createElement(T.a,{className:s.container},0===d.length?l.a.createElement(v.a,{color:"textSecondary"},"No actors found."):l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(R.a,{htmlFor:"actor-name-filter"},"Actor Search"),l.a.createElement(A.a,{id:"actor-name-filter","aria-describedby":"actor-name-helper-text",value:n,onChange:function(e){return a(e.target.value)}}),l.a.createElement(L.a,{id:"actor-name-helper-text"},"Search for an actor by name")),l.a.createElement(Se,{actorGroups:Object.fromEntries(d)})))},we=n(483),Ie=n(439),Te=n(485),Fe=n(149),Re=n.n(Fe),Ae=n(148),Le=n.n(Ae),Me=n(147),De=n.n(Me),Pe=n(95),ze=Object(Pe.b)({name:"dashboard",initialState:{actorGroups:null,tab:0,rayConfig:null,nodeInfo:null,tuneInfo:null,tuneAvailability:null,lastUpdatedAt:null,error:null,memoryTable:null,shouldObtainMemoryTable:!1},reducers:{setTab:function(e,t){e.tab=t.payload},setRayConfig:function(e,t){e.rayConfig=t.payload},setNodeInfo:function(e,t){e.nodeInfo=t.payload.nodeInfo,e.lastUpdatedAt=Date.now()},setActorGroups:function(e,t){e.actorGroups=t.payload.actorGroups},setTuneInfo:function(e,t){e.tuneInfo=t.payload.result,e.lastUpdatedAt=Date.now()},setTuneAvailability:function(e,t){e.tuneAvailability=t.payload.result,e.lastUpdatedAt=Date.now()},setError:function(e,t){e.error=t.payload},setMemoryTable:function(e,t){e.memoryTable=t.payload.memoryTable},setShouldObtainMemoryTable:function(e,t){e.shouldObtainMemoryTable=t.payload}}}),We=ze.actions,Be=ze.reducer,Ue=function(e,t){return"".concat((e/("mebibyte"===t?Math.pow(1024,2):Math.pow(1024,3))).toFixed(1)," ").concat("mebibyte"===t?"MiB":"GiB")},Ge=function(e,t,n,a){var r=Ue(e,n),o=Ue(t,n),c=100*e/t,i="".concat(r," / ").concat(o);return a?"".concat(i," (").concat(c.toFixed(0),"%)"):i},_e=function(e){var t=Math.floor(e)%60,n=Math.floor(e/60)%60,a=Math.floor(e/60/60)%24,r=Math.floor(e/60/60/24),o=function(e){return e.toString().padStart(2,"0")};return[r?"".concat(r,"d"):"","".concat(o(a),"h"),"".concat(o(n),"m"),"".concat(o(t),"s")].join(" ")},He=function(e){try{return(e.toString().split(".")[1].length||0)<=3?e.toString():Math.abs(e.valueOf())>=1?e.toPrecision(5):e.toExponential()}catch(t){return e.toString()}},Ve=Object(b.a)((function(e){return Object(g.a)({expandCollapseIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"},container:{padding:e.spacing(1),margin:e.spacing(1)}})})),qe=function(e){var t=e.memoryTableSummary,n=Ve(),a=[["Total Local Reference Count","".concat(t.totalLocalRefCount)],["Pinned in Memory Count","".concat(t.totalPinnedInMemory)],["Total Used by Pending Tasks Count","".concat(t.totalUsedByPendingTask)],["Total Captured in Objects Count","".concat(t.totalCapturedInObjects)],["Total Memory Used by Objects","".concat(Ue(t.totalObjectSize,"mebibyte"))],["Total Actor Handle Count","".concat(t.totalActorHandles)]];return l.a.createElement(V.a,{container:!0,className:n.container},a.map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return l.a.createElement(ee,{key:n,label:n,datum:a})})))},Je=n(481),Ye=n(482),Ke=n(479),Xe=n(480),Qe=n(506),Ze=n(478),$e=Object(_.a)(Ze.a)((function(e){return{padding:e.theme.spacing(1),textAlign:"center"}})),et=(Object(_.a)(Ze.a)((function(e){return{padding:e.theme.spacing(1),textAlign:"center",cursor:"pointer"}})),Object(b.a)((function(e){return Object(g.a)({visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}})}))),tt=function(e){var t=e.order,n=e.orderBy,a=e.onRequestSort,r=e.headerInfo,o=e.firstColumnEmpty,c=et();return l.a.createElement(Ke.a,null,l.a.createElement(Xe.a,null,o&&l.a.createElement($e,null),r.map((function(e){return e.sortable?l.a.createElement($e,{key:e.label,align:e.numeric?"right":"left",sortDirection:n===e.id&&t},l.a.createElement(Qe.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(r=e.id,function(e){a(e,r)})},e.label,n===e.id?l.a.createElement("span",{className:c.visuallyHidden},"desc"===t?"sorted descending":"sorted ascending"):null)):l.a.createElement($e,{key:e.label,align:e.numeric?"right":"left"},e.label);var r}))))},nt=function(e){var t=e.memoryTableEntry,n=-1===t.objectSize?"?":Ue(t.objectSize,"mebibyte"),a=[t.nodeIpAddress,t.pid,t.type,t.objectRef,n,t.referenceType,t.callSite];return l.a.createElement(Xe.a,{hover:!0},a.map((function(e,t){return l.a.createElement($e,{key:"".concat(t)},e)})))},at=Object(b.a)((function(e){return Object(g.a)({container:{margin:e.spacing(1),padding:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center"}})})),rt=[{id:"nodeIpAddress",label:"IP Address",numeric:!1,sortable:!0},{id:"pid",label:"PID",numeric:!1,sortable:!0},{id:"type",label:"Type",numeric:!1,sortable:!0},{id:"objectRef",label:"Object Ref",numeric:!1,sortable:!0},{id:"objectSize",label:"Object Size",numeric:!1,sortable:!0},{id:"referenceType",label:"Reference Type",numeric:!1,sortable:!0},{id:"callSite",label:"Call Site",numeric:!1,sortable:!0}],ot=function(e){var t=e.tableEntries,n=at(),a=l.a.useState("asc"),o=Object(r.a)(a,2),c=o[0],i=o[1],u=l.a.useState(null),s=Object(r.a)(u,2),m=s[0],d=s[1],p=m&&function(e,t){return"desc"===e?function(e,n){return z(e,n,t)}:function(e,n){return-z(e,n,t)}}(c,m),f=(p?U(t,p):t).map((function(e){return l.a.createElement(nt,{memoryTableEntry:e,key:e.objectRef})}));return l.a.createElement(H.a,{className:n.container,elevation:2},l.a.createElement(Je.a,null,l.a.createElement(tt,{orderBy:m,order:c,onRequestSort:function(e,t){t===m?i("asc"===c?"desc":"asc"):(d(t),i("asc"))},headerInfo:rt,firstColumnEmpty:!1}),l.a.createElement(Ye.a,null,f)))},ct=Object(_.a)(T.a)({textAlign:"center"}),it=Object(b.a)((function(e){return Object(g.a)({container:{marginTop:e.spacing(2),marginBottom:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})})),lt=function(e){var t=e.groupKey,n=e.groupTitle,a=e.entries,o=e.summary,c=e.initialExpanded,u=e.initialVisibleEntries,s=it(),m=Object(i.useState)(c),d=Object(r.a)(m,2),p=d[0],f=d[1],b=Object(i.useState)(u),g=Object(r.a)(b,2),v=g[0],h=g[1],E=function(){return f(!p)},y=a.slice(0,v);return l.a.createElement(H.a,{key:t,className:s.container},n,l.a.createElement(qe,{initialExpanded:!1,memoryTableSummary:o}),p?l.a.createElement(l.a.Fragment,null,l.a.createElement(ot,{tableEntries:y}),l.a.createElement(ct,null,a.length>v&&l.a.createElement(Q,{onClick:function(){return h(v+10)}}),l.a.createElement(X,{onClick:E}))):l.a.createElement(ct,null,l.a.createElement(Q,{onClick:E})))},ut=function(e,t){return"node"===t?l.a.createElement(v.a,{variant:"h6"},"Node ".concat(e)):"stack_trace"===t?l.a.createElement(st,{stackTrace:e}):""===t?l.a.createElement(v.a,{variant:"h6"},"All entries"):l.a.createElement(v.a,{variant:"h6"},"Unknown Group")},st=function(e){var t=e.stackTrace.split(" | ").map((function(e,t){return l.a.createElement(v.a,{variant:0===t?"h6":"subtitle2",style:{marginLeft:"".concat(t,"em")},key:t},0!==t&&l.a.createElement(De.a,null),e)}));return l.a.createElement(T.a,null,t)},mt=Object(b.a)((function(e){return Object(g.a)({pauseButton:{margin:e.spacing(1),padding:e.spacing(1),float:"right"},select:{minWidth:"7em"}})})),dt=function(e){return e.dashboard.memoryTable},pt=function(e){return 0===Object.keys(e.group).length},ft=function(e){return Math.abs(((new Date).getTime()-e.getTime())/1e3)>10},bt=function(){var e=Object(u.d)(dt),t=Object(u.c)(),n=new Date,a=Object(i.useState)(!1),o=Object(r.a)(a,2),c=o[0],s=o[1],m=c?l.a.createElement(Le.a,null):l.a.createElement(Re.a,null),d=mt(),p=Object(i.useState)("node"),f=Object(r.a)(p,2),b=f[0],g=f[1];Object(i.useEffect)((function(){return Object(j.q)(!0),function(){Object(j.q)(!1)}}),[]);var E=Object(i.useCallback)((function(){}),[b,t]),y=Object(i.useRef)(null);if(Object(i.useEffect)((function(){y.current||c||(E(),y.current=setInterval(E,4e3));return function(){y.current&&(clearInterval(y.current),y.current=null)}}),[c,E,t]),!e||pt(e)&&!ft(n))return l.a.createElement(v.a,{align:"center",color:"textSecondary",variant:"h3"},l.a.createElement(we.a,null)," Loading");if(pt(e)&&ft(n))return l.a.createElement(v.a,{align:"center",color:"textSecondary",variant:"h3"},"Finished loading, but nothing found.");var O=Object.entries(e.group).sort((function(e,t){return Object(r.a)(e,1)[0]<Object(r.a)(t,1)[0]?-1:1})).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return l.a.createElement(lt,{key:n,groupKey:n,groupTitle:ut(n,b),entries:a.entries,summary:a.summary,initialExpanded:!1,initialVisibleEntries:10})}));return l.a.createElement(T.a,null,l.a.createElement(F.a,null,l.a.createElement(R.a,{shrink:!0,id:"group-by-label"},"Group by"),l.a.createElement(Ie.a,{labelId:"group-by-label",value:b,className:d.select,onChange:function(e){return g(e.target.value)},color:"primary",displayEmpty:!0},l.a.createElement(Te.a,{value:""},l.a.createElement("em",null,"None")),l.a.createElement(Te.a,{value:"node"},"Node IP Address"),l.a.createElement(Te.a,{value:"stack_trace"},"Stack Trace"))),l.a.createElement(h.a,{color:"primary",className:d.pauseButton,onClick:function(){y.current&&(clearInterval(y.current),y.current=null),Object(j.q)(!c),s(!c)}},m,c?"Resume Collection":"Pause Collection"),O)},gt=n(488),vt=n(503),ht=n(8),Et=n(487),yt=n(424),jt=n(150),Ot=n.n(jt),kt=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.handleClose,a=e.title;return l.a.createElement(Et.a,{classes:{paper:t.paper},fullWidth:!0,maxWidth:"md",onClose:n,open:!0,scroll:"body"},l.a.createElement(yt.a,{className:t.closeButton,onClick:n},l.a.createElement(Ot.a,null)),l.a.createElement(v.a,{className:t.title},a),this.props.children)}}]),n}(l.a.Component),St=Object(C.a)((function(e){return Object(g.a)({paper:{padding:e.spacing(3)},closeButton:{position:"absolute",right:e.spacing(1.5),top:e.spacing(1.5),zIndex:1},title:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1,fontSize:"1.5rem",lineHeight:1,marginBottom:e.spacing(3),paddingBottom:e.spacing(3)}})}))(kt),Nt=n(59),xt=n.n(Nt),Ct=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.lines;return l.a.createElement(Je.a,null,l.a.createElement(Ye.a,null,n.map((function(e,n){return l.a.createElement(Xe.a,{key:n},l.a.createElement(Ze.a,{className:xt()(t.cell,t.lineNumber),"data-line-number":n+1}),l.a.createElement(Ze.a,{className:xt()(t.cell,t.line)},e))}))))}}]),n}(l.a.Component),wt=Object(C.a)((function(e){return Object(g.a)({root:{overflowX:"auto"},cell:{borderWidth:0,fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",padding:0,"&:last-child":{paddingRight:0}},lineNumber:{color:e.palette.text.secondary,paddingRight:e.spacing(2),textAlign:"right",verticalAlign:"top",width:"1%","&::before":{content:"attr(data-line-number)"}},line:{textAlign:"left",whiteSpace:"pre-wrap"}})}))(Ct),It=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={result:null,error:null},e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,n=t.nodeIp,a=t.pid,e.next=4,Object(j.e)(n,a);case 4:r=e.sent,this.setState({result:r.errors,error:null}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({result:null,error:e.t0.toString()});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.clearErrorDialog,a=e.nodeIp,o=this.state,c=o.result,i=o.error;return l.a.createElement(St,{handleClose:n,title:"Errors"},null!==i?l.a.createElement(v.a,{color:"error"},i):null===c?l.a.createElement(v.a,{color:"textSecondary"},"Loading..."):Object.entries(c).map((function(e){var n=Object(r.a)(e,2),o=n[0],c=n[1];return l.a.createElement(l.a.Fragment,{key:o},l.a.createElement(v.a,{className:t.header},a," (PID: ",o,")"),c.length>0?c.map((function(e,n){var a=e.message,r=e.timestamp;return l.a.createElement("div",{className:t.error,key:n},l.a.createElement(v.a,{className:t.timestamp},"Error at ",new Date(1e3*r).toLocaleString()),l.a.createElement(wt,{lines:a.trim().split("\n")}))})):l.a.createElement(v.a,{color:"textSecondary"},"No errors found."))})))}}]),n}(l.a.Component),Tt=Object(C.a)((function(e){return Object(g.a)({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},error:{backgroundColor:Object(ht.c)(e.palette.error.main,.04),borderLeftColor:e.palette.error.main,borderLeftStyle:"solid",borderLeftWidth:2,marginTop:e.spacing(3),padding:e.spacing(2)},timestamp:{color:e.palette.text.secondary,marginBottom:e.spacing(1)}})}))(It),Ft=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={result:null,error:null},e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,n=t.nodeIp,a=t.pid,e.next=4,Object(j.f)(n,a);case 4:r=e.sent,this.setState({result:r,error:null}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({result:null,error:e.t0.toString()});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.clearLogDialog,a=e.nodeIp,r=this.state,o=r.result,c=r.error;return l.a.createElement(St,{handleClose:n,title:"Logs"},null!==c?l.a.createElement(v.a,{color:"error"},c):null===o?l.a.createElement(v.a,{color:"textSecondary"},"Loading..."):l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{className:t.header},a," (PID: ",this.props.pid,")"),o.length>0?l.a.createElement("div",{className:t.log},l.a.createElement(wt,{lines:o})):l.a.createElement(v.a,{color:"textSecondary"},"No logs found.")))}}]),n}(l.a.Component),Rt=Object(C.a)((function(e){return Object(g.a)({header:{lineHeight:1,marginBottom:e.spacing(3),marginTop:e.spacing(3)},log:{backgroundColor:Object(ht.c)(e.palette.primary.main,.04),borderLeftColor:e.palette.primary.main,borderLeftStyle:"solid",borderLeftWidth:2,padding:e.spacing(2)}})}))(Ft),At={id:"cpu",ClusterFeatureRenderFn:function(e){var t=e.nodes,n=Object(G.a)(t.map((function(e){return{weight:e.cpus[0],value:e.cpu}})));return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(re.a,{percent:n,text:"".concat(n.toFixed(1),"%")}))},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(re.a,{percent:t.cpu,text:"".concat(t.cpu.toFixed(1),"%")}))},WorkerFeatureRenderFn:function(e){var t=e.worker;return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(re.a,{percent:t.cpuPercent,text:"".concat(t.cpuPercent.toFixed(1),"%")}))},nodeAccessor:function(e){return e.node.cpu},workerAccessor:function(e){return e.worker.cpuPercent}},Lt=At,Mt=n(39),Dt={id:"disk",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=0,o=Object(Mt.a)(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;"/"in c.disk&&(a+=c.disk["/"].used,r+=c.disk["/"].total)}}catch(i){o.e(i)}finally{o.f()}return l.a.createElement(re.a,{percent:100*a/r,text:Ge(a,r,"gibibyte",!0)})},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(re.a,{percent:100*t.disk["/"].used/t.disk["/"].total,text:Ge(t.disk["/"].used,t.disk["/"].total,"gibibyte",!0)})},WorkerFeatureRenderFn:function(){return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},nodeAccessor:function(e){return e.node.disk["/"].used}},Pt=n(118),zt=["classes"],Wt=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=Object(Pt.a)(e,zt);return l.a.createElement("span",Object.assign({className:t.button},n))}}]),n}(l.a.Component),Bt=Object(C.a)((function(e){return Object(g.a)({button:{color:e.palette.primary.main,"&:hover":{cursor:"pointer",textDecoration:"underline"}}})}))(Wt),Ut=function(e){var t=e.nodes,n=Object(G.b)(t.map((function(e){var t;return null!==(t=e.errorCount)&&void 0!==t?t:0})));return 0===n?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):l.a.createElement(l.a.Fragment,null,n.toLocaleString()," ",1===n?"error":"errors")},Gt=function(e){return function(t){var n,a=t.node,r=null!==(n=a.errorCount)&&void 0!==n?n:0;return 0===r?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors"):l.a.createElement(Bt,{onClick:function(){return e(a.ip,null)}},"View all errors (",r.toLocaleString(),")")}},_t=function(e){var t;return null!==(t=e.node.errorCount)&&void 0!==t?t:0},Ht=function(e){return function(t){var n,a=t.node,r=t.worker;return 0!==r.errorCount?l.a.createElement(Bt,{onClick:function(){return e(a.ip,r.pid)}},"View errors (",null===(n=r.errorCount)||void 0===n?void 0:n.toLocaleString(),")"):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No errors")}},Vt=function(e){var t;return null!==(t=e.worker.errorCount)&&void 0!==t?t:0},qt=function(e){return{id:"errors",ClusterFeatureRenderFn:Ut,WorkerFeatureRenderFn:Ht(e),NodeFeatureRenderFn:Gt(e),nodeAccessor:_t,workerAccessor:Vt}},Jt=n(134),Yt=n(86),Kt=function(e){var t=function(e){return e.memoryUsed&&e.memoryTotal?e.memoryUsed/e.memoryTotal:NaN},n=e.gpus.map(t).filter((function(e){return!!e}));return 0===n.length?NaN:100*(Object(G.b)(e.gpus.map((function(e){return t(e)})))/e.gpus.length)},Xt=function(e){var t=e.gpuName,n=e.slot,a=function(e,t){return"".concat(e," MiB / ").concat(t," MiB")}(e.utilization,e.total);return l.a.createElement(T.a,{display:"flex",style:{minWidth:120}},l.a.createElement(Z.a,{title:t},l.a.createElement(Yt.a,{variant:"body1"},"[",n,"]: ",a)))},Qt={id:"gram",ClusterFeatureRenderFn:function(e){var t=function(e){var t=e.map((function(e){return{weight:e.gpus.length,value:Kt(e)}})).filter((function(e){return!isNaN(e.value)}));return 0===t.length?NaN:Object(G.a)(t)}(e.nodes);return l.a.createElement("div",{style:{minWidth:60}},isNaN(t)?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):l.a.createElement(re.a,{percent:t,text:"".concat(t.toFixed(1),"%")}))},NodeFeatureRenderFn:function(e){var t=e.node.gpus.map((function(e,t){var n={gpuName:e.name,utilization:e.memoryUsed,total:e.memoryTotal,slot:t};return l.a.createElement(Xt,n)}));return l.a.createElement("div",{style:{minWidth:60}},0===t.length?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):l.a.createElement("div",{style:{minWidth:120}},t))},WorkerFeatureRenderFn:function(e){var t=e.worker,n=e.node.gpus.map((function(e,n){var a=e.processes.find((function(e){return e.pid===t.pid}));if(a){var r={gpuName:e.name,total:e.memoryTotal,utilization:a.gpuMemoryUsage,slot:n};return l.a.createElement(Xt,r)}})).filter((function(e){return void 0!==e}));return 0===n.length?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A"):l.a.createElement("div",{style:{minWidth:120}},n)},nodeAccessor:function(e){var t=e.node,n=Kt(t);return isNaN(n)?-1:n},workerAccessor:function(e){var t=e.worker,n=e.node;return 0===n.gpus.length?-1:function(e,t){var n=t.gpus.map((function(e){return e.processes})).map((function(t){return t.find((function(t){return t.pid===e.pid}))})).map((function(e){return(null===e||void 0===e?void 0:e.gpuMemoryUsage)||0}));return Object(G.b)(n)}(t,n)}},Zt={id:"host",ClusterFeatureRenderFn:function(e){var t=e.nodes;return l.a.createElement(l.a.Fragment,null,"Totals (",t.length.toLocaleString()," ",1===t.length?"host":"hosts",")")},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(l.a.Fragment,null,t.hostname," (",t.ip,")")},WorkerFeatureRenderFn:function(e){var t=e.worker;return l.a.createElement(l.a.Fragment,null,t.cmdline[0].split("::",2)[0]," (PID: ",t.pid,")")},nodeAccessor:function(e){return e.node.hostname}},$t=function(e){var t=e.nodes,n=Object(G.b)(t.map((function(e){var t;return null!==(t=e.logCount)&&void 0!==t?t:0})));return 0===n?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):l.a.createElement(l.a.Fragment,null,n.toLocaleString()," ",1===n?"line":"lines")},en=function(e){var t,n=e.node,a=null!==(t=n.logCount)&&void 0!==t?t:0;return 0===a?l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs"):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},a.toLocaleString()," ",1===n.logCount?"line":"lines")},tn=function(e){var t=e.node;return t.logCount?Object(G.b)(Object.values(t.logCount)):0},nn=function(e){return function(t){var n,a=t.worker,r=t.node,o=null!==(n=a.logCount)&&void 0!==n?n:0;return 0!==o?l.a.createElement(Bt,{onClick:function(){return e(r.ip,a.pid)}},"View log (",o.toLocaleString()," ",1===a.logCount?"line":"lines",")"):l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"No logs")}},an=function(e){var t;return null!==(t=e.worker.logCount)&&void 0!==t?t:0},rn=function(e){return{id:"logs",ClusterFeatureRenderFn:$t,WorkerFeatureRenderFn:nn(e),NodeFeatureRenderFn:en,workerAccessor:an,nodeAccessor:tn}},on={id:"objectStoreMemory",ClusterFeatureRenderFn:function(e){var t=e.nodes,n=Object(G.b)(t.map((function(e){return e.raylet.objectStoreAvailableMemory}))),a=Object(G.b)(t.map((function(e){return e.raylet.objectStoreUsedMemory}))),r=a+n;return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(re.a,{percent:a/r*100,text:Ge(a,r,"mebibyte",!1)}))},NodeFeatureRenderFn:function(e){var t=e.node,n=t.raylet.objectStoreAvailableMemory,a=t.raylet.objectStoreUsedMemory,r=n+a;if(void 0===a||void 0===n||0===r)return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A");var o=a/r;return l.a.createElement("div",{style:{minWidth:60}},l.a.createElement(re.a,{percent:100*o,text:Ge(a,r,"mebibyte",!1)}))},WorkerFeatureRenderFn:function(){return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},nodeAccessor:function(e){return e.node.raylet.objectStoreUsedMemory},workerAccessor:function(){return 0}},cn={id:"ram",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=0,o=Object(Mt.a)(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;a+=c.mem[0]-c.mem[1],r+=c.mem[0]}}catch(i){o.e(i)}finally{o.f()}return l.a.createElement(re.a,{percent:100*a/r,text:Ge(a,r,"gibibyte",!0)})},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(re.a,{percent:100*(t.mem[0]-t.mem[1])/t.mem[0],text:Ge(t.mem[0]-t.mem[1],t.mem[0],"gibibyte",!0)})},WorkerFeatureRenderFn:function(e){var t=e.node,n=e.worker;return l.a.createElement(re.a,{percent:100*n.memoryInfo.rss/t.mem[0],text:Ue(n.memoryInfo.rss,"mebibyte")})},nodeAccessor:function(e){var t=e.node;return 100*(t.mem[0]-t.mem[1])},workerAccessor:function(e){return e.worker.memoryInfo.rss}},ln={id:"received",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=Object(Mt.a)(n);try{for(r.s();!(t=r.n()).done;){a+=t.value.networkSpeed[1]}}catch(o){r.e(o)}finally{r.f()}return l.a.createElement(l.a.Fragment,null,Ue(a,"mebibyte"),"/s")},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(l.a.Fragment,null,Ue(t.networkSpeed[1],"mebibyte"),"/s")},WorkerFeatureRenderFn:function(){return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},nodeAccessor:function(e){return e.node.networkSpeed[1]}},un={id:"sent",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=Object(Mt.a)(n);try{for(r.s();!(t=r.n()).done;){a+=t.value.networkSpeed[0]}}catch(o){r.e(o)}finally{r.f()}return l.a.createElement(l.a.Fragment,null,Ue(a,"mebibyte"),"/s")},NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(l.a.Fragment,null,Ue(t.networkSpeed[0],"mebibyte"),"/s")},WorkerFeatureRenderFn:function(){return l.a.createElement(v.a,{color:"textSecondary",component:"span",variant:"inherit"},"N/A")},nodeAccessor:function(e){return e.node.networkSpeed[0]}},sn=function(e){return Date.now()/1e3-e},mn={id:"uptime",NodeFeatureRenderFn:function(e){var t=e.node;return l.a.createElement(l.a.Fragment,null,_e(sn(t.bootTime)))},WorkerFeatureRenderFn:function(e){var t=e.worker;return l.a.createElement(l.a.Fragment,null,_e(sn(t.createTime)))},nodeAccessor:function(e){var t=e.node;return sn(t.bootTime)},workerAccessor:function(e){var t=e.worker;return sn(t.createTime)}},dn={id:"workers",ClusterFeatureRenderFn:function(e){var t,n=e.nodes,a=0,r=0,o=Object(Mt.a)(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;a+=c.cpus[0],r+=c.workers.length}}catch(i){o.e(i)}finally{o.f()}return l.a.createElement(l.a.Fragment,null,r.toLocaleString()," ",1===r?"worker":"workers"," / ",a.toLocaleString()," ",1===a?"core":"cores")},NodeFeatureRenderFn:function(e){var t=e.node,n=t.cpus[0],a=t.workers.length;return l.a.createElement(l.a.Fragment,null,a.toLocaleString()," ",1===a?"worker":"workers"," / ",n.toLocaleString()," ",1===n?"core":"cores")},WorkerFeatureRenderFn:function(e){var t=e.worker;return l.a.createElement(l.a.Fragment,null,t.cmdline[0].split("::",2)[1])}},pn=n(135),fn=n.n(pn),bn=n(136),gn=n.n(bn),vn=function(e){var t=e.features,n=e.data,a=n.node,r=n.worker;return l.a.createElement(Xe.a,{hover:!0},l.a.createElement($e,null),t.map((function(e,t){return l.a.createElement($e,{key:t},l.a.createElement(e,{node:a,worker:r}))})))},hn=Object(b.a)((function(e){return Object(g.a)({cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},expandCollapseCell:{cursor:"pointer"},expandCollapseIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"},extraInfo:{fontFamily:"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace",whiteSpace:"pre"}})})),En=function(e){var t=e.features,n=e.node,a=e.initialExpanded,o=e.rayletInfo,c=e.workerFeatureData,u=Object(i.useState)(a),s=Object(r.a)(u,2),m=s[0],d=s[1],p=hn(),f=t.map((function(e,t){var a=e.NodeFeatureRenderFn;return l.a.createElement($e,{className:p.cell,key:t},l.a.createElement(a,{node:n}))}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(Xe.a,{hover:!0},l.a.createElement(Ze.a,{className:xt()(p.cell,p.expandCollapseCell),onClick:function(){return d(!m)}},m?l.a.createElement(gn.a,{className:p.expandCollapseIcon}):l.a.createElement(fn.a,{className:p.expandCollapseIcon})),f),m&&l.a.createElement(l.a.Fragment,null,void 0!==o&&l.a.createElement(Xe.a,{hover:!0},l.a.createElement(Ze.a,{className:p.cell}),l.a.createElement(Ze.a,{className:xt()(p.cell,p.extraInfo),colSpan:t.length},o)),c.map((function(e,n){return l.a.createElement(vn,{key:n,features:t.map((function(e){return e.WorkerFeatureRenderFn})),data:e})}))))},yn=n(151),jn=n.n(yn),On=Object(b.a)((function(e){return Object(g.a)({cell:{borderTopColor:e.palette.divider,borderTopStyle:"solid",borderTopWidth:2,padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}},totalIcon:{color:e.palette.text.secondary,fontSize:"1.5em",verticalAlign:"middle"}})})),kn=function(e){var t=e.nodes,n=e.features,a=On();return l.a.createElement(Xe.a,{hover:!0},l.a.createElement(Ze.a,{className:a.cell},l.a.createElement(jn.a,{className:a.totalIcon})),n.map((function(e,n){return e?l.a.createElement(Ze.a,{className:a.cell,key:n},l.a.createElement(e,{nodes:t})):l.a.createElement($e,{key:n})})))},Sn=function(e,t){var n=e.sort((function(e,t){var n=e.worker,a=t.worker;return"ray::IDLE"===a.cmdline[0]?-1:"ray::IDLE"===n.cmdline[0]?1:n.pid<a.pid?-1:1}));return t?U(n,t):n},Nn=Object(b.a)((function(e){return Object(g.a)({table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}}})})),xn=function(e){var t,n;return null===(t=e.dashboard)||void 0===t||null===(n=t.nodeInfo)||void 0===n?void 0:n.clients.filter((function(e){return"ALIVE"===e.raylet.state}))},Cn=[{id:"host",label:"Host",numeric:!0,sortable:!0},{id:"workers",label:"PID",numeric:!0,sortable:!1},{id:"uptime",label:"Uptime (s)",numeric:!0,sortable:!0},{id:"cpu",label:"CPU",numeric:!1,sortable:!0},{id:"ram",label:"RAM",numeric:!0,sortable:!0},{id:"gpu",label:"GPU",numeric:!0,sortable:!0},{id:"gram",label:"GRAM",numeric:!0,sortable:!0},{id:"objectStoreMemory",label:"Plasma",numeric:!1,sortable:!0},{id:"disk",label:"Disk",numeric:!0,sortable:!0},{id:"sent",label:"Sent",numeric:!0,sortable:!0},{id:"received",label:"Received",numeric:!1,sortable:!0},{id:"logs",label:"Logs",numeric:!1,sortable:!0},{id:"errors",label:"Errors",numeric:!1,sortable:!0}],wn=function(){var e,t,n=Object(i.useState)(null),a=Object(r.a)(n,2),o=a[0],c=a[1],s=Object(i.useState)(null),m=Object(r.a)(s,2),d=m[0],p=m[1],f=Object(i.useState)(!0),b=Object(r.a)(f,2),g=b[0],h=b[1],E=l.a.useState("asc"),y=Object(r.a)(E,2),j=y[0],O=y[1],k=l.a.useState(null),S=Object(r.a)(k,2),N=S[0],x=S[1],C=Nn(),w=Object(u.d)(xn);if(!w)return l.a.createElement(v.a,{color:"textSecondary"},"Loading...");var I=Object(G.b)(w.map((function(e){return e.workers.length}))),T=[Zt,dn,mn,Lt,cn,Jt.d,Qt,on,Dt,un,ln,rn((function(e,t){return c({nodeIp:e,pid:t})})),qt((function(e,t){return p({nodeIp:e,pid:t})}))],F=null===(e=T.find((function(e){return e.id===N})))||void 0===e?void 0:e.nodeAccessor,R=F&&B(j,F),A=null===(t=T.find((function(e){return e.id===N})))||void 0===t?void 0:t.workerAccessor,L=A&&B(j,A),M=0!==w.map((function(e){return e.gpus})).filter((function(e){return void 0!==e&&0!==e.length})).length,D=0!==w.filter((function(e){return void 0!==e&&void 0!==e.disk&&e.disk["/"].total>10})).length,P=function(e){return(M||"gpu"!==e.id&&"gram"!==e.id)&&(D||"disk"!==e.id)},z=T.filter(P),W=Cn.filter(P),_=g?function(e,t,n,a){return(n?U(e,n):e).map((function(n){var r=n.workers.map((function(e){return{node:n,worker:e}})),o=Sn(r,t);return l.a.createElement(En,{key:n.raylet.nodeId,node:n,workerFeatureData:o,features:a,initialExpanded:e.length<=1})}))}(w,L,R,z):function(e,t,n){var a=n.map((function(e){return e.WorkerFeatureRenderFn})),r=e.flatMap((function(e){return e.workers.map((function(t){return{node:e,worker:t}}))}));return Sn(r,t).map((function(e,t){return l.a.createElement(vn,{features:a,data:e,key:"worker-".concat(t)})}))}(w,L,z);return l.a.createElement(l.a.Fragment,null,l.a.createElement(gt.a,{control:l.a.createElement(vt.a,{checked:g,onChange:function(){return h(!g)},color:"primary"}),label:"Group by host"}),l.a.createElement(Je.a,{className:C.table},l.a.createElement(tt,{onRequestSort:function(e,t){t===N?O("asc"===j?"desc":"asc"):(x(t),O("asc"))},headerInfo:W,order:j,orderBy:N,firstColumnEmpty:!0}),l.a.createElement(Ye.a,null,_,l.a.createElement(kn,{clusterTotalWorkers:I,nodes:w,features:z.map((function(e){return e.ClusterFeatureRenderFn}))}))),null!==o&&l.a.createElement(Rt,{clearLogDialog:function(){return c(null)},nodeIp:o.nodeIp,pid:o.pid}),null!==d&&l.a.createElement(Tt,{clearErrorDialog:function(){return p(null)},nodeIp:d.nodeIp,pid:d.pid}))},In=Object(b.a)((function(e){return Object(g.a)({table:{marginTop:e.spacing(1),width:"auto"},cell:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),textAlign:"center","&:last-child":{paddingRight:e.spacing(3)}},key:{color:e.palette.text.secondary}})})),Tn=We.setRayConfig,Fn=We.setError,Rn=function(e){return e.dashboard.rayConfig},An=function(){var e=In(),t=Object(u.d)(Rn),n=Object(u.c)(),a=Object(i.useCallback)(Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j.j)();case 3:t=e.sent,n(Tn(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(Fn(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n]),r=Object(i.useRef)(null);if(Object(i.useEffect)((function(){null===r.current&&(a(),r.current=setInterval(a,1e4));return function(){clearInterval(r.current)}}),[a]),null===t)return l.a.createElement(v.a,{color:"textSecondary"},"No Ray configuration detected.");var o=[{key:"Autoscaling mode",value:t.autoscalingMode},{key:"Head node type",value:t.headType},{key:"Worker node type",value:t.workerType},{key:"Min worker nodes",value:t.minWorkers},{key:"Initial worker nodes",value:t.initialWorkers},{key:"Max worker nodes",value:t.maxWorkers},{key:"Idle timeout",value:"".concat(t.idleTimeoutMinutes," ").concat(1===t.idleTimeoutMinutes?"minute":"minutes")}];return l.a.createElement("div",null,l.a.createElement(v.a,null,"Ray cluster configuration:"),l.a.createElement(Je.a,{className:e.table},l.a.createElement(Ke.a,null,l.a.createElement(Xe.a,null,l.a.createElement(Ze.a,{className:e.cell},"Setting"),l.a.createElement(Ze.a,{className:e.cell},"Value"))),l.a.createElement(Ye.a,null,o.map((function(t,n){var a=t.key,r=t.value;return l.a.createElement(Xe.a,{key:n},l.a.createElement(Ze.a,{className:xt()(e.cell,e.key)},a),l.a.createElement(Ze.a,{className:e.cell},r))})))))},Ln=n(491),Mn=n(489),Dn=We,Pn=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={currentError:"",open:!1},e.handleOpen=function(t){e.setState({open:!0,currentError:t})},e.handleClose=function(){e.setState({open:!1})},e}return Object(S.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.tuneInfo,r=this.state,o=r.currentError,c=r.open;return null===a||0===Object.keys(a.errors).length?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(Je.a,{className:n.table},l.a.createElement(Ke.a,null,l.a.createElement(Xe.a,null,l.a.createElement(Ze.a,{className:n.cell}," Job ID"),l.a.createElement(Ze.a,{className:n.cell}," Trial ID "),l.a.createElement(Ze.a,{className:n.cell}," Trial Directory "),l.a.createElement(Ze.a,{className:n.cell}," Error "))),l.a.createElement(Ye.a,null,null!==a.errors&&Object.keys(a.errors).map((function(t,r){return l.a.createElement(Xe.a,{key:r},l.a.createElement(Ze.a,{className:n.cell},a.errors[t].jobId),l.a.createElement(Ze.a,{className:n.cell},a.errors[t].trialId),l.a.createElement(Ze.a,{className:n.cell},t),l.a.createElement(Ze.a,{className:n.cell},l.a.createElement(Mn.a,{component:"button",variant:"body2",onClick:function(){e.handleOpen(t)}},"Show Error")))})))),c&&l.a.createElement(St,{handleClose:this.handleClose,title:"Error Log"},c&&l.a.createElement(wt,{lines:a.errors[o].text.trim().split("\n")})))}}]),n}(l.a.Component),zn=Object(u.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo}}),Dn)(Object(C.a)((function(e){return Object(g.a)({table:{marginTop:e.spacing(1)},cell:{padding:e.spacing(1),textAlign:"center","&:last-child":{paddingRight:e.spacing(1)}}})}))(Pn)),Wn=n(431),Bn=n(490),Un=We,Gn=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).timeout=0,e.state={sortedColumn:void 0,ascending:!0,metricParamColumn:"",metricColumns:[],paramColumns:[],errorTrial:"",open:!1},e.onColumnClick=function(t,n){var a=e.state.ascending;a=t!==e.state.sortedColumn||!a,e.setState({sortedColumn:t,ascending:a}),n&&e.setState({metricParamColumn:n})},e.humanize=function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},e.handleOpen=function(t){"number"===typeof t&&(t=t.toString()),e.setState({open:!0,errorTrial:t})},e.handleClose=function(){e.setState({open:!1})},e.sortedCell=function(t,n,a){var r=e.props,o=r.tuneInfo,c=r.classes,i=e.state,u=i.sortedColumn,s=i.ascending,m=i.metricParamColumn,d="asc";if(t!==u||s||(d="desc"),null!==o){var p=function(){return e.onColumnClick(t)};n&&(p=function(){return e.onColumnClick(t,n)}),a||(a=0);var f=!1,b=t+a.toString();return n?(b=n+a.toString(),f=n===m&&u===t):f=t===u,l.a.createElement(Ze.a,{className:c.cell,key:b,onClick:p},l.a.createElement(Qe.a,{active:f,direction:d}),n?e.humanize(n):e.humanize(t))}},e.sortedTrialRecords=function(){var t=e.props.tuneInfo,n=e.state,a=n.sortedColumn,r=n.ascending,o=n.metricParamColumn;if(null===t||0===Object.keys(t.trialRecords).length)return null;var c=Object.values(t.trialRecords);if(!a)return c;var i=function(e){return e[a]};return"metrics"!==a&&"params"!==a||(i=function(e){return e[a][o]}),a&&(r?c.sort((function(e,t){return i(e)>i(t)?1:-1})):r||c.sort((function(e,t){return i(e)<i(t)?1:-1}))),c},e.handleMetricChoiceChange=function(t){return function(n){var a=e.state.metricColumns;n.target.checked?(a.push(t),e.setState({metricColumns:a})):(a=a.filter((function(e){return e!==t})),e.setState({metricColumns:a}))}},e.metricChoices=function(t){var n=e.state.metricColumns;return l.a.createElement(F.a,null,l.a.createElement(Wn.a,{component:"legend"},"Select Metrics "),l.a.createElement(Bn.a,null,t.map((function(t){return l.a.createElement(gt.a,{control:l.a.createElement(vt.a,{checked:n.includes(t),onChange:e.handleMetricChoiceChange(t),value:t,color:"primary"}),label:t})}))))},e.handleParamChoiceChange=function(t){return function(n){var a=e.state.paramColumns;n.target.checked?(a.push(t),e.setState({paramColumns:a})):(a=a.filter((function(e){return e!==t})),e.setState({paramColumns:a}))}},e.paramChoices=function(t){var n=e.props.classes,a=e.state.paramColumns;return l.a.createElement(F.a,{className:n.paramChecklist},l.a.createElement(Wn.a,{component:"legend"},"Select Parameters "),l.a.createElement(Bn.a,null,t.map((function(t){return l.a.createElement(gt.a,{control:l.a.createElement(vt.a,{checked:a.includes(t),onChange:e.handleParamChoiceChange(t),value:t,color:"primary"}),label:t})}))))},e}return Object(S.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.tuneInfo,r=this.state,o=r.metricColumns,c=r.paramColumns,i=r.open,u=r.errorTrial;if(null===a||0===Object.keys(a.trialRecords).length)return null;var s=Object.keys(a.trialRecords)[0],m=a.trialRecords[s].params,d=Object.keys(m).filter((function(e){return"args"!==e})),p=d,f=d.length>3;f&&(0===c.length&&this.setState({paramColumns:d.slice(0,3)}),p=c);var b=Object.keys(a.trialRecords[s].metrics),g=b,v=b.length>3;v&&(0===o.length&&this.setState({metricColumns:b.slice(0,3)}),g=o);var h=this.sortedTrialRecords();return l.a.createElement("div",{className:n.root},l.a.createElement(V.a,{container:!0,spacing:0},(f||v)&&l.a.createElement(V.a,{item:!0,xs:2,className:n.checkboxRoot},f&&this.paramChoices(d),v&&this.metricChoices(b)),l.a.createElement(V.a,{item:!0,xs:f||v?10:12,className:n.table},l.a.createElement(Je.a,{stickyHeader:!0},l.a.createElement(Ke.a,null,l.a.createElement(Xe.a,null,this.sortedCell("trialId"),this.sortedCell("jobId"),this.sortedCell("startTime"),p.map((function(t,n){return e.sortedCell("params",t,n)})),this.sortedCell("status"),g.map((function(t,n){return e.sortedCell("metrics",t,n)})),l.a.createElement(Ze.a,{className:n.cell,key:"error"},"Error"))),l.a.createElement(Ye.a,null,null!==h&&h.map((function(t,a){return l.a.createElement(Xe.a,{key:a},l.a.createElement(Ze.a,{className:n.cell},t.trialId),l.a.createElement(Ze.a,{className:n.cell},t.jobId),l.a.createElement(Ze.a,{className:n.cell},t.startTime),p.map((function(e,a){return l.a.createElement(Ze.a,{className:n.cell,key:a},"number"===typeof t.params[e]?He(Number(t.params[e])):t.params[e])})),l.a.createElement(Ze.a,{className:n.cell},t.status),t.metrics&&g.map((function(e,a){return l.a.createElement(Ze.a,{className:n.cell,key:a},"number"===typeof t.metrics[e]?He(Number(t.metrics[e])):t.metrics[e])})),l.a.createElement(Ze.a,{className:n.cell},"No Error"===t.error?"No Error":l.a.createElement(Mn.a,{component:"button",variant:"body2",onClick:function(){e.handleOpen(t.trialId)}},"Show Error")))})))))),i&&l.a.createElement(St,{handleClose:this.handleClose,title:"Error Log"},i&&l.a.createElement(wt,{lines:a.trialRecords[u].error.trim().split("\n")})))}}]),n}(l.a.Component),_n=Object(u.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo}}),Un)(Object(C.a)((function(e){return Object(g.a)({root:{padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(2)}},table:{marginTop:e.spacing(1),height:"700px",overflowY:"auto"},cell:{padding:e.spacing(1),textAlign:"right","&:last-child":{paddingRight:e.spacing(1)}},checkboxRoot:{height:"500px",overflowY:"auto",overflowX:"auto"},paramChecklist:{marginBottom:e.spacing(2)}})}))(Gn)),Hn=We,Vn=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={tensorBoardEnabled:!1,loading:!1},e.handleSubmit=function(){e.setState({loading:!0}),Object(j.c)().then((function(){e.setState({loading:!1})}))},e.tensorBoard=function(){var t=e.props,n=t.classes,a=t.error,r=t.tuneInfo;return l.a.createElement("div",null,"TypeError: Failed to fetch"===a&&l.a.createElement(v.a,{className:n.warning,color:"textSecondary"},'Warning: Tensorboard server closed. View Tensorboard by running "tensorboard --logdir" if not displaying below.'),r&&!r.tensorboard.tensorboardCurrent&&l.a.createElement(v.a,{className:n.warning,color:"textSecondary"},"The below Tensorboard reflects a previously entered log directory. Restart the Ray Dashboard to change the Tensorboard logdir."),l.a.createElement("iframe",{src:"http://localhost:6006/",className:n.board,title:"TensorBoard"}))},e}return Object(S.a)(n,[{key:"enableTensorBoard",value:function(){Object(j.c)(),this.setState({tensorBoardEnabled:!0})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.tuneInfo,a=this.state.loading;if(null!==n){var r=n.tensorboard.tensorboardEnabled;return l.a.createElement("div",{className:t.root},!r&&l.a.createElement("div",null,l.a.createElement(h.a,{variant:"outlined",onClick:this.handleSubmit,className:t.warning},"Enable TensorBoard"),a&&l.a.createElement(we.a,{className:t.progress,size:25})),r&&this.tensorBoard())}}}]),n}(l.a.Component),qn=Object(u.b)((function(e){return{error:e.dashboard.error,tuneInfo:e.dashboard.tuneInfo}}),Hn)(Object(C.a)((function(e){return Object(g.a)({root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(4)}},board:{width:"100%",height:"1000px",border:"none"},warning:{fontSize:"0.8125rem"},progress:{marginLeft:"10px",marginTop:"2px"}})}))(Vn)),Jn=We,Yn=function(e){Object(N.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).timeout=0,e.state={tabIndex:0,experiment:"",loading:!1},e.refreshTuneInfo=Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.props.tuneAvailability||!e.props.tuneAvailability.available){t.next=6;break}return t.next=4,Object(j.l)();case 4:n=t.sent,e.props.setTuneInfo(n);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.props.setError(t.t0.toString());case 11:return t.prev=11,e.timeout=window.setTimeout(e.refreshTuneInfo,1e3),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])}))),e.handleTabChange=function(t,n){e.setState({tabIndex:n})},e.handleExperimentChange=function(t){e.setState({experiment:t.target.value})},e.handleExperimentSubmit=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,Object(j.r)(e.state.experiment);case 4:return window.clearTimeout(e.timeout),t.next=7,e.refreshTuneInfo();case 7:e.setState({loading:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.props.setError(t.t0.toString()),e.setState({loading:!1});case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.experimentChoice=function(t){var n=e.props.classes,a=e.state.loading;return l.a.createElement("div",null,t&&l.a.createElement(v.a,{className:n.heading,color:"textPrimary"},"You can use this tab to monitor Tune jobs, their statuses, hyperparameters, and more. For more information, read the documentation"," ",l.a.createElement("a",{href:"https://docs.ray.io/en/master/ray-dashboard.html#tune"},"here"),"."),l.a.createElement("div",null,l.a.createElement(v.a,{className:n.prompt,color:"textSecondary"},"Enter Tune Log Directory Here:"),l.a.createElement(Ln.a,{className:n.input,id:"standard-basic",value:e.state.experiment,onChange:e.handleExperimentChange}),l.a.createElement(h.a,{className:n.submit,variant:"outlined",onClick:e.handleExperimentSubmit},"Submit"),a&&l.a.createElement(we.a,{className:n.progress,size:25})))},e}return Object(S.a)(n,[{key:"componentWillUnmount",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearTimeout(this.timeout);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.tuneInfo,a=e.tuneAvailability;if(a&&!a.trialsAvailable)return this.experimentChoice(!0);var r=this.state.tabIndex,o=[{label:"Table",component:_n},{label:"TensorBoard",component:qn}];null!==n&&Object.keys(n.errors).length>0&&o.push({label:"Errors",component:zn});var c=o[r].component;return l.a.createElement("div",{className:t.root},this.experimentChoice(!1),l.a.createElement(E.a,{className:t.tabs,indicatorColor:"primary",onChange:this.handleTabChange,textColor:"primary",value:r},o.map((function(e){var t=e.label;return l.a.createElement(y.a,{key:t,label:t})}))),l.a.createElement(c,null))}}]),n}(l.a.Component),Kn=Object(u.b)((function(e){return{tuneInfo:e.dashboard.tuneInfo,tuneAvailability:e.dashboard.tuneAvailability}}),Jn)(Object(C.a)((function(e){return Object(g.a)({root:{backgroundColor:e.palette.background.paper},tabs:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1},heading:{fontsize:"0.9em",marginTop:e.spacing(2)},warning:{fontSize:"1em"},warningIcon:{fontSize:"1.25em",verticalAlign:"text-bottom"},formControl:{margin:e.spacing(1),minWidth:120},submit:{marginLeft:e.spacing(2),fontSize:"0.8125em"},prompt:{fontSize:"1em",marginTop:e.spacing(1)},input:{width:"85%"},progress:{marginLeft:e.spacing(2)}})}))(Yn)),Xn=We.setNodeInfo,Qn=We.setTuneAvailability,Zn=We.setActorGroups,$n=We.setError,ea=We.setTab,ta=Object(b.a)((function(e){return Object(g.a)({root:{backgroundColor:e.palette.background.paper,padding:e.spacing(2),"& > :not(:first-child)":{marginTop:e.spacing(4)},position:"relative"},tabs:{borderBottomColor:e.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1}})})),na=function(e){return e.dashboard.tab},aa=function(e){return e.dashboard.tuneAvailability},ra=[{label:"Machine view",component:wn},{label:"Logical view",component:Ce},{label:"Memory",component:bt},{label:"Ray config",component:An},{label:"Tune",component:Kn}],oa=function(){var e=Object(u.c)(),t=Object(u.d)(aa),n=Object(u.d)(na),a=ta(),o=Object(m.g)(),c=Object(i.useCallback)(Object(f.a)(p.a.mark((function t(){var n,a,o,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([Object(j.h)(),Object(j.k)(),Object(j.d)()]);case 3:n=t.sent,a=Object(r.a)(n,3),o=a[0],c=a[1],i=a[2],e(Xn({nodeInfo:o})),e(Qn(c)),e(Zn(i)),e($n(null)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e($n(t.t0.toString()));case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),[e]),s=Object(i.useRef)(null);Object(i.useEffect)((function(){null===s.current&&(c(),s.current=setInterval(c,1e3));return function(){clearInterval(s.current)}}),[c]);var d=ra.slice();null!==t&&t.available||d.splice(4);var b=d[n].component;return l.a.createElement("div",{className:a.root},l.a.createElement(v.a,{variant:"h5"},"Ray Dashboard"),l.a.createElement(h.a,{style:{position:"absolute",right:16,top:16},variant:"contained",size:"small",color:"primary",onClick:function(){return o.push("/node")}},"Back to new dashboard"),l.a.createElement(E.a,{className:a.tabs,indicatorColor:"primary",onChange:function(t,n){return e(ea(n))},textColor:"primary",value:n},d.map((function(e){var t=e.label;return l.a.createElement(y.a,{key:t,label:t})}))),l.a.createElement(b,null),l.a.createElement(O.a,null),l.a.createElement(I,null))},ca=n(85),ia=n(496),la=n(497),ua=n(507),sa=n(498),ma=n(504),da=n(502),pa=n(64),fa=n.n(pa),ba=n(69),ga=n.n(ba),va=function(e){if(e)return ga.a.get("events?job_id=".concat(e))},ha=n(115),Ea=n(117),ya=n(110),ja=Object(b.a)((function(e){return{table:{marginTop:e.spacing(4),padding:e.spacing(2)},pageMeta:{padding:e.spacing(2),marginTop:e.spacing(2)},search:{margin:e.spacing(1),display:"inline-block",fontSize:12,lineHeight:"46px"},infokv:{margin:e.spacing(1)},li:{color:e.palette.text.secondary,fontSize:12},code:{wordBreak:"break-all",whiteSpace:"pre-line",margin:12,fontSize:14,color:e.palette.text.primary}}})),Oa=function(e){var t=ja(),n=function(e){var t=e.job_id,n=Object(i.useContext)(Ya).nodeMap,a=Object(i.useState)(!0),o=Object(r.a)(a,2),c=o[0],l=o[1],u=Object(ha.a)(),s=u.changeFilter,m=u.filterFunc,d=Object(i.useState)([]),b=Object(r.a)(d,2),g=b[0],v=b[1],h=Object(i.useState)([]),E=Object(r.a)(h,2),y=E[0],j=E[1],O=Object(i.useState)({pageNo:1,pageSize:10,total:0}),k=Object(r.a)(O,2),S=k[0],N=k[1],x=g.filter(m).length,C=S.pageSize;Object(i.useEffect)((function(){var e=function(){var e=Object(f.a)(p.a.mark((function e(){var n,a,r,o,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,va(t);case 4:(null===(r=e.sent)||void 0===r||null===(n=r.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.events)&&v(r.data.data.events.sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)}))),e.next=12;break;case 8:return e.next=10,ga.a.get("events");case 10:(null===(i=e.sent)||void 0===i||null===(o=i.data)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.events)&&(j(Object.keys(i.data.data.events).filter((function(e){return""!==e}))),v(Object.values(i.data.data.events).reduce((function(e,t){return e.concat(t)})).sort((function(e,t){return Number(t.timestamp)-Number(e.timestamp)}))));case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:return e.prev=16,l(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,14,16,19]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(i.useEffect)((function(){N((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{total:Math.ceil(x/e.pageSize),pageNo:1})}))}),[x,C]);var w=[(S.pageNo-1)*S.pageSize,S.pageNo*S.pageSize];return{events:g.filter(m).slice(w[0],w[1]),changeFilter:function(){s.apply(void 0,arguments),N(Object(ne.a)(Object(ne.a)({},S),{},{pageNo:1}))},isJob:!!t,jobOptions:y,pagination:S,changePage:function(e,t){N(Object(ne.a)(Object(ne.a)({},S),{},Object(te.a)({},e,t)))},labelOptions:Array.from(new Set(g.map((function(e){return e.label})))),hostOptions:Array.from(new Set(g.map((function(e){return e.sourceHostname||e.hostName})))),sourceOptions:Array.from(new Set(g.map((function(e){return e.sourceType})))),severityOptions:Array.from(new Set(g.map((function(e){return e.severity})))),loading:c,reverseEvents:function(){v(Object(ca.a)(g.reverse()))},nodeMap:n}}(e),a=n.events,o=n.changeFilter,c=n.isJob,u=n.jobOptions,m=n.pagination,d=n.changePage,b=n.labelOptions,g=n.hostOptions,v=n.sourceOptions,E=n.severityOptions,y=n.loading,j=n.reverseEvents,O=n.nodeMap;return y?l.a.createElement(ia.a,null):l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("div",null,l.a.createElement(ma.a,{className:t.search,style:{width:200},options:b,onInputChange:function(e,t){o("label",t.trim())},renderInput:function(e){return l.a.createElement(Ln.a,Object.assign({},e,{label:"Label"}))}}),l.a.createElement(ma.a,{className:t.search,style:{width:200},options:g,onInputChange:function(e,t){o("sourceHostname",t.trim())},renderInput:function(e){return l.a.createElement(Ln.a,Object.assign({},e,{label:"Host"}))}}),l.a.createElement(ma.a,{className:t.search,style:{width:100},options:v,onInputChange:function(e,t){o("sourceType",t.trim())},renderInput:function(e){return l.a.createElement(Ln.a,Object.assign({},e,{label:"Source"}))}}),l.a.createElement(ma.a,{className:t.search,style:{width:140},options:E,onInputChange:function(e,t){o("severity",t.trim())},renderInput:function(e){return l.a.createElement(Ln.a,Object.assign({},e,{label:"Severity"}))}}),!c&&l.a.createElement(ma.a,{className:t.search,style:{width:100},options:u,onInputChange:function(e,t){o("jobId",t.trim())},renderInput:function(e){return l.a.createElement(Ln.a,Object.assign({},e,{label:"Job"}))}}),l.a.createElement(Ln.a,{className:t.search,label:"Msg",InputProps:{onChange:function(e){var t=e.target.value;o("message",t.trim())},endAdornment:l.a.createElement(la.a,{position:"end"},l.a.createElement(sa.a,null))}}),l.a.createElement(Ln.a,{className:t.search,label:"Page Size",InputProps:{onChange:function(e){var t=e.target.value;d("pageSize",Math.min(Number(t),500)||10)},value:m.pageSize}}),l.a.createElement(h.a,{className:t.search,onClick:function(){return j()}},"Reverse")),l.a.createElement("div",null,l.a.createElement(da.a,{count:m.total,page:m.pageNo,onChange:function(e,t){d("pageNo",t)}})),l.a.createElement("div",{className:t.pageMeta},a.length?a.map((function(e){var n=e.label,a=e.message,r=e.timestamp,o=e.timeStamp,c=e.sourceType,i=e.sourceHostname,u=e.hostName,m=e.sourcePid,d=e.pid,p=e.eventId,f=e.jobId,b=e.jobName,g=e.nodeId,v=e.severity,h=e.customFields,E=o||fa()(Math.floor(1e3*r)).format("YYYY-MM-DD HH:mm:ss"),y=i||u,j=d||m;return l.a.createElement("article",{className:t.li,key:p},l.a.createElement(V.a,{container:!0,spacing:4},l.a.createElement(V.a,{item:!0},l.a.createElement(ya.a,{status:n,type:v})),l.a.createElement(V.a,{item:!0},E),h&&l.a.createElement(V.a,{item:!0},l.a.createElement(Z.a,{interactive:!0,title:l.a.createElement("pre",{style:{whiteSpace:"pre-wrap"}},JSON.stringify(h,null,2))},l.a.createElement(ua.a,{size:"small",label:"CustomFields"})))),l.a.createElement(V.a,{container:!0},l.a.createElement(V.a,{item:!0,className:t.infokv},"severity: ",v),l.a.createElement(V.a,{item:!0,className:t.infokv},"source: ",c),l.a.createElement(V.a,{item:!0,className:t.infokv},"hostname:"," ",O[y]?l.a.createElement(s.b,{to:"/node/".concat(O[y])},y):y),l.a.createElement(V.a,{item:!0,className:t.infokv},"pid: ",j),f&&l.a.createElement(V.a,{item:!0,className:t.infokv},"jobId: ",l.a.createElement(s.b,{to:"/job/".concat(f)},f)),b&&l.a.createElement(V.a,{item:!0,className:t.infokv},"jobId: ",b),p&&l.a.createElement(V.a,{item:!0,className:t.infokv},"eventId: ",p),g&&l.a.createElement(V.a,{item:!0,className:t.infokv},"nodeId: ",g)),l.a.createElement(Ea.a,{content:a,language:"prolog"}))})):"No Events Yet."),l.a.createElement("div",null,l.a.createElement(da.a,{count:m.total,page:m.pageNo,onChange:function(e,t){d("pageNo",t)}})))},ka=n(109),Sa=Object(b.a)((function(e){return{root:{padding:e.spacing(2)}}})),Na=function(){var e=Sa();return l.a.createElement("div",{className:e.root},l.a.createElement(ka.a,{title:"Event"},l.a.createElement(Oa,null)))},xa=n(138),Ca=function(){return l.a.createElement("div",{style:{height:"100vh",width:"100vw"}},l.a.createElement("div",{style:{margin:"250px auto 0 auto",textAlign:"center",fontSize:40,fontWeight:500}},l.a.createElement("img",{src:xa.a,alt:"Loading",width:100}),l.a.createElement("br",null),"Loading..."))},wa=n(113),Ia=Object(Pe.a)({reducer:{dashboard:Be},devTools:!1}),Ta=n(99),Fa=n(493),Ra=n(96),Aa=n(495),La=n(154),Ma={typography:{fontSize:12,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},props:{MuiPaper:{elevation:0}}},Da=Object(La.a)(Object(ne.a)(Object(ne.a)({},Ma),{},{palette:{primary:Ta.a,secondary:Fa.a,text:{primary:Ra.a[900],secondary:Ra.a[800],disabled:Ra.a[400],hint:Ra.a[300]},background:{paper:"#fff",default:Aa.a[50]}}})),Pa=Object(La.a)(Object(ne.a)(Object(ne.a)({},Ma),{},{palette:{primary:Ta.a,secondary:Fa.a,text:{primary:Aa.a[50],secondary:Aa.a[100],disabled:Aa.a[200],hint:Aa.a[300]},background:{paper:Ra.a[800],default:Ra.a[900]}}})),za=l.a.lazy((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,529))})),Wa=l.a.lazy((function(){return n.e(11).then(n.bind(null,530))})),Ba=l.a.lazy((function(){return n.e(6).then(n.bind(null,531))})),Ua=l.a.lazy((function(){return n.e(5).then(n.bind(null,532))})),Ga=l.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,533))})),_a=l.a.lazy((function(){return n.e(12).then(n.bind(null,527))})),Ha=l.a.lazy((function(){return n.e(8).then(n.bind(null,534))})),Va=l.a.lazy((function(){return n.e(4).then(n.bind(null,528))})),qa=l.a.lazy((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,535))})),Ja="ray-dashboard-theme",Ya=l.a.createContext({nodeMap:{},nodeMapByIp:{},ipLogMap:{},namespaceMap:{}}),Ka=function(){return function(e){var t=window.localStorage.getItem(e);try{return JSON.parse(t||"")}catch(n){return t}}(Ja)||"light"},Xa=function(e){return t=Ja,n=e,window.localStorage.setItem(t,JSON.stringify(n));var t,n};t.b=function(){var e,t=Object(i.useState)(Ka()),n=Object(r.a)(t,2),a=n[0],d=n[1],p=Object(i.useState)({nodeMap:{},nodeMapByIp:{},ipLogMap:{},namespaceMap:{}}),f=Object(r.a)(p,2),b=f[0],g=f[1],v=function(e){Xa(e),d(e)};return Object(i.useEffect)((function(){Object(wa.b)().then((function(e){var t,n;if(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.summary){var a={},r={},o={};e.data.data.summary.forEach((function(e){var t=e.hostname,n=e.raylet,c=e.ip,i=e.logUrl;a[t]=n.nodeId,r[c]=n.nodeId,o[c]=i})),g({nodeMap:a,nodeMapByIp:r,ipLogMap:o,namespaceMap:{}})}}))}),[]),l.a.createElement(c.a,{theme:(e=a,"dark"===e?Pa:Da)},l.a.createElement(i.Suspense,{fallback:Ca},l.a.createElement(Ya.Provider,{value:b},l.a.createElement(u.a,{store:Ia},l.a.createElement(o.a,null),l.a.createElement(s.a,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{component:function(){return l.a.createElement(m.a,{to:"/node"})},exact:!0,path:"/"}),l.a.createElement(m.b,{component:oa,exact:!0,path:"/legacy"}),l.a.createElement(m.b,{render:function(e){return l.a.createElement(_a,Object.assign({},e,{setTheme:v,theme:a}),l.a.createElement(m.b,{component:Ba,exact:!0,path:"/summary"}),l.a.createElement(m.b,{component:Ua,exact:!0,path:"/job"}),l.a.createElement(m.b,{component:Va,exact:!0,path:"/node"}),l.a.createElement(m.b,{component:za,exact:!0,path:"/actors"}),l.a.createElement(m.b,{component:Na,exact:!0,path:"/events"}),l.a.createElement(m.b,{render:function(e){return l.a.createElement(Ha,Object.assign({},e,{theme:a}))},exact:!0,path:"/log/:host?/:path?"}),l.a.createElement(m.b,{component:qa,path:"/node/:id"}),l.a.createElement(m.b,{component:Ga,path:"/job/:id"}),l.a.createElement(m.b,{component:Wa,path:"/cmd/:cmd/:ip/:pid"}),l.a.createElement(m.b,{component:Ca,exact:!0,path:"/loading"}))}})))))))}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(107),r=n(48),o=Object(a.a)(r.a)((function(e){return{paddingRight:e.theme.spacing(1)}}))},9:function(e,t,n){"use strict";n.d(t,"j",(function(){return u})),n.d(t,"m",(function(){return s})),n.d(t,"h",(function(){return m})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return a})),n.d(t,"n",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"p",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"i",(function(){return h})),n.d(t,"o",(function(){return E})),n.d(t,"l",(function(){return y})),n.d(t,"k",(function(){return j})),n.d(t,"r",(function(){return O})),n.d(t,"c",(function(){return k})),n.d(t,"g",(function(){return S})),n.d(t,"q",(function(){return N}));var a,r=n(12),o=n.n(r),c=n(17),i=n(50),l=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r,c,l,u,s,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.entries(n).map((function(e){return e.join("=")})).join("&"),r=[Object(i.a)(t),a].filter((function(e){return e})).join("?"),e.next=4,fetch(r);case 4:return c=e.sent,e.next=7,c.json();case 7:if(l=e.sent,u=l.result,s=l.msg,m=l.data,u){e.next=11;break}throw Error(s);case 11:return e.abrupt("return",m);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){return l("/api/ray_config",{})},s=function(){return l("/usage_stats_enabled",{})},m=function(){return l("/nodes",{view:"details"})},d=function(){return l("logical/actor_groups",{})};function p(e){return e.state!==a.Infeasible&&e.state!==a.PendingResources}!function(e){e.Infeasible="INFEASIBLE",e.PendingResources="PENDING_RESOURCES",e.DependenciesUnready="PENDING",e.PendingCreation="CREATING",e.Alive="ALIVE",e.Restarting="RESTARTING",e.Dead="DEAD"}(a||(a={}));var f=function(e,t){return l("/node_errors",{nodeIp:e,pid:null!==t&&void 0!==t?t:""})},b=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)("/api/v0/logs/file",{params:{node_ip:t,pid:n,lines:15e3}});case 2:return a=e.sent,e.abrupt("return",a.data.substring(1).split("\n"));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(e,t,n){return l("/api/launch_profiling",{node_id:e,pid:t,duration:n})},v=function(e){return l("/api/check_profiling_status",{profiling_id:e})},h=function(e){var t=encodeURIComponent(Object(i.a)("/api/get_profiling_info?profiling_id=".concat(e)));return Object(i.a)("/speedscope/index.html#profileURL=".concat(t))},E=function(e,t,n){return l("/logical/kill_actor",{actorId:e,ipAddress:t,port:n})},y=function(){return l("/tune/info",{})},j=function(){return l("/tune/availability",{})},O=function(e){return l("/tune/set_experiment",{experiment:e})},k=function(){return l("/tune/enable_tensorboard",{})},S=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l("/memory/memory_table",{groupBy:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){return l("/memory/set_fetch",{shouldFetch:e})}}},[[165,2,3]]]);
//# sourceMappingURL=main.ea23af42.chunk.js.map